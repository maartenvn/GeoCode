{"version":3,"sources":["webpack:///./src/api/services/ReportService.ts","webpack:///./src/components/modal/admin/ReportModal.vue?4db3","webpack:///./src/components/modal/admin/ReportModal.vue?3e84","webpack:///./src/components/modal/admin/ReportModal.vue","webpack:///./src/components/modal/admin/ReportModal.vue?5db4","webpack:///./src/components/modal/admin/ReportModal.vue?b324","webpack:///./src/util/ImageUtil.ts"],"names":["ReportService","secretId","body","image","reportId","setBaseUrl","BACKEND","URL","addInterceptor","build","render","_vm","this","_h","$createElement","_c","_self","_v","_s","payload","report","location","name","attrs","on","close","reason","message","getImageURL","resolved","$event","resolveReport","staticRenderFns","ImageUtil","getById","id","value","update","then","$store","dispatch","catch","error","ErrorHandler","handle","style","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VIcon","VSpacer"],"mappings":"sNAoBMA,E,wKAOF,SACsBC,EACVC,GAER,MAAO,K,yBAUX,SAAgCC,GAC5B,MAAO,K,oBAIX,SACsBC,EACVF,GAER,MAAO,K,kCAIX,WACI,MAAO,O,GAnCa,kBAOxB,gBADC,kBAAK,iCAED,mCAAK,aACL,uC,qBAGJ,MASD,gBAFC,6BACA,kBAAK,kBACO,wCAAU,W,0BAEtB,MAGD,gBADC,mBAAM,uBAEF,mCAAK,aACL,uC,qBAGJ,MAGD,gBADC,iBAAI,uB,mCAGJ,MAGU,YAAI,yBACdG,WAAW,OAAOC,QAAQC,KAC1BC,eAAe,IAAI,QACnBC,MAAMT,I,oCC9DX,W,yCCAA,IAAIU,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAAC,CAACA,EAAG,eAAe,CAACJ,EAAIM,GAAG,eAAeN,EAAIO,GAAGP,EAAIQ,QAAQC,OAAOC,SAASC,MAAM,KAAKP,EAAG,YAAYA,EAAG,QAAQ,CAACQ,MAAM,CAAC,KAAO,IAAIC,GAAG,CAAC,MAAQb,EAAIc,QAAQ,CAACV,EAAG,SAAS,CAACJ,EAAIM,GAAG,gBAAgB,IAAI,GAAGF,EAAG,cAAc,CAACA,EAAG,IAAI,CAACJ,EAAIM,GAAG,WAAWN,EAAIO,GAAGP,EAAIQ,QAAQC,OAAOM,WAAWX,EAAG,IAAI,CAACJ,EAAIM,GAAGN,EAAIO,GAAGP,EAAIQ,QAAQC,OAAOO,YAAYZ,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAIiB,YAAYjB,EAAIQ,QAAQC,aAAaL,EAAG,iBAAiB,CAACA,EAAG,YAAcJ,EAAIQ,QAAQC,OAAOS,SAA+Jd,EAAG,QAAQ,CAACQ,MAAM,CAAC,KAAO,GAAG,UAAY,GAAG,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAASM,GAAQ,OAAOnB,EAAIoB,eAAc,MAAU,CAACpB,EAAIM,GAAG,iBAA5RF,EAAG,QAAQ,CAACQ,MAAM,CAAC,KAAO,GAAG,UAAY,GAAG,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAASM,GAAQ,OAAOnB,EAAIoB,eAAc,MAAS,CAACpB,EAAIM,GAAG,gBAAwK,KAAK,IAC92Be,EAAkB,G,4GCuDD,EAArB,6KAUI,SAAYZ,GACR,OAAoB,MAAhBA,EAAOjB,MACA8B,EAAA,KAAUC,QAAQd,EAAOjB,MAAMgC,IAEnC,KAdf,2BAoBI,SAAcC,GAAc,WACxBpC,EAAA,KAAcqC,OAAOzB,KAAKO,QAAQC,OAAOe,GAAI,CAAEN,SAAUO,IACpDE,MAAK,WAEF,EAAKnB,QAAQC,OAAOS,SAAWO,EAC/B,EAAKG,OAAOC,SAAS,kBAExBC,OAAM,SAACC,GACJC,EAAA,KAAaC,OAAOF,EAAO,CACvBP,GAAI,cACJU,MAAO,kBA9B3B,mBAsCI,WACIjC,KAAK2B,OAAOC,SAAS,mBAvC7B,GAAyC,QAKrC,gBADC,kB,8BAJgB,EAAW,gBAD/B,QACoB,WCxDqZ,I,yGCQtaM,EAAY,eACd,EACApC,EACAsB,GACA,EACA,KACA,KACA,MAIa,aAAAc,EAAiB,QAWhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,UAAA,OAAUC,WAAA,OAAWC,QAAA,KAAMC,UAAA,Q,wHC5BpEpB,EAAb,kGAKI,SAAeE,GACX,OAAIA,EACA,UAAU,OAAO7B,QAAQC,IAAzB,kBAAsC4B,GAGnC,OAVf,M","file":"js/chunk-dfaf80b0.9b11ef6d.js","sourcesContent":["import {\n    Body,\n    EchoPromise,\n    EchoService,\n    EchoServiceBuilder,\n    FormField,\n    FormMultipart,\n    GET,\n    PATCH,\n    Path,\n    POST,\n} from \"echofetch\";\nimport config from \"@/config\";\nimport { AuthInterceptor } from \"@/api/interceptors/AuthInterceptor\";\nimport ReportLocation from \"@/api/models/ReportLocation\";\nimport {\n    ReportCreateWrapper,\n    ReportUpdateWrapper,\n} from \"@/api/wrappers/ReportWrapper\";\n\nclass ReportService extends EchoService {\n    /**\n     * Create a new report for a specific location.\n     * @param secretId Secret id of the location.\n     * @param body\n     */\n    @POST(\"/locations/{secretId}/reports\")\n    create(\n        @Path(\"secretId\") secretId: string,\n        @Body() body: ReportCreateWrapper\n    ): EchoPromise<void> {\n        return {} as EchoPromise<void>;\n    }\n\n    /**\n     * Upload an image for a report.\n     * @param secretId Secret id of the location.\n     * @param body\n     */\n    @FormMultipart()\n    @POST(\"/reports/image\")\n    uploadImage(@FormField(\"image\") image: File): EchoPromise<number> {\n        return {} as EchoPromise<number>;\n    }\n\n    @PATCH(\"/reports/{reportId}\")\n    update(\n        @Path(\"reportId\") reportId: number,\n        @Body() body: ReportUpdateWrapper\n    ): EchoPromise<void> {\n        return {} as EchoPromise<void>;\n    }\n\n    @GET(\"/reports/locations\")\n    getReportedLocations(): EchoPromise<Array<ReportLocation>> {\n        return {} as EchoPromise<Array<ReportLocation>>;\n    }\n}\n\nexport default new EchoServiceBuilder()\n    .setBaseUrl(config.BACKEND.URL)\n    .addInterceptor(new AuthInterceptor())\n    .build(ReportService);\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportModal.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[[_c('v-card-title',[_vm._v(\" Report for \"+_vm._s(_vm.payload.report.location.name)+\" \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.close}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',[_c('p',[_vm._v(\"Reason: \"+_vm._s(_vm.payload.report.reason))]),_c('p',[_vm._v(_vm._s(_vm.payload.report.message))]),_c('img',{attrs:{\"src\":_vm.getImageURL(_vm.payload.report)}})]),_c('v-card-actions',[_c('v-spacer'),(!_vm.payload.report.resolved)?_c('v-btn',{attrs:{\"dark\":\"\",\"depressed\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.resolveReport(true)}}},[_vm._v(\" Resolve \")]):_c('v-btn',{attrs:{\"dark\":\"\",\"depressed\":\"\",\"color\":\"warning\"},on:{\"click\":function($event){return _vm.resolveReport(false)}}},[_vm._v(\" Unresolve \")])],1)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Report from \"@/api/models/Report.ts\";\nimport { ImageUtil } from \"@/util/ImageUtil.ts\";\nimport ReportService from \"@/api/services/ReportService\";\nimport { ErrorHandler } from \"@/api/error/ErrorHandler\";\n\n@Component\nexport default class ReportModal extends Vue {\n    /**\n     * Payload, passed when opening the modal.\n     */\n    @Prop()\n    payload: { report: Report };\n\n    /*\n     *   use the image id to make a usable image url\n     */\n    getImageURL(report: Report): string {\n        if (report.image != null) {\n            return ImageUtil.getById(report.image.id);\n        }\n        return \"\";\n    }\n\n    /**\n     * Resolve report.\n     */\n    resolveReport(value: boolean) {\n        ReportService.update(this.payload.report.id, { resolved: value })\n            .then(() => {\n                // set report to correct resolve status so it shows in the table\n                this.payload.report.resolved = value;\n                this.$store.dispatch(\"modal/close\");\n            })\n            .catch((error) => {\n                ErrorHandler.handle(error, {\n                    id: \"reportModal\",\n                    style: \"SNACKBAR\",\n                });\n            });\n    }\n\n    /**\n     * Close the modal.\n     */\n    close() {\n        this.$store.dispatch(\"modal/close\");\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ReportModal.vue?vue&type=template&id=53af32fc&\"\nimport script from \"./ReportModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./ReportModal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ReportModal.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VIcon,VSpacer})\n","import config from \"@/config\";\n\nexport class ImageUtil {\n    /**\n     * Get an image by id.\n     * @param id Id of the image\n     */\n    static getById(id: number): string {\n        if (id) {\n            return `${config.BACKEND.URL}images/${id}`;\n        }\n\n        return \"\";\n    }\n}\n"],"sourceRoot":""}