{"version":3,"sources":["webpack:///./src/components/map/popup/LocationPopup.vue?33b5","webpack:///./src/components/map/popup/LocationPopup.vue","webpack:///./src/components/map/popup/LocationPopup.vue?d912","webpack:///./src/components/map/popup/LocationPopup.vue?c5cd","webpack:///./src/assets/img/marker-icon-2x-red.png","webpack:///./src/components/map/tour/TourMap.vue?38bd","webpack:///./src/types/map/tour/TourCreatePopup.ts","webpack:///./src/components/map/popup/TourCreatePopup.vue?1990","webpack:///./src/components/map/popup/TourCreatePopup.vue","webpack:///./src/components/map/popup/TourCreatePopup.vue?fb42","webpack:///./src/components/map/popup/TourCreatePopup.vue?0ee5","webpack:///./src/types/map/MapLine.ts","webpack:///./src/components/map/tour/TourMap.vue","webpack:///./src/components/map/tour/TourMap.vue?ee29","webpack:///./src/components/map/tour/TourMap.vue?3349","webpack:///./src/components/modal/tour/TourCreateModal.vue?9fdc","webpack:///./src/components/modal/tour/TourCreateModal.vue","webpack:///./src/components/modal/tour/TourCreateModal.vue?303e","webpack:///../../../src/components/VCombobox/VCombobox.ts","webpack:///./src/components/modal/tour/TourCreateModal.vue?fea4","webpack:///./src/api/services/LocationService.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","payload","location","name","staticRenderFns","component","VBtn","VIcon","VRow","module","exports","staticStyle","showLocations","locations","isLoading","isSuccess","height","width","zoom","center","centerByIp","centerByGeo","markers","lines","popupComponent","searchEnabled","on","onSearchClick","isError","_e","selected","onButtonClick","map","closePopup","action","latLngs","latLng","lat","lng","RequestHandler","handle","LocationService","getAll","id","style","showSelect","LocationPopup","result","flyTo","y","x","_markers","Array","_tourLocations","tourLocation","latitude","longitude","MapMarker","ArrayUtil","delete","setPopupPayload","setIcon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","push","requireData","includes","marker","popupPayload","_lines","i","length","locationStart","locationEnd","startCoord","endCoord","line","color","default","components","MarkerMap","ErrorPlaceholder","VSkeletonLoader","close","stepper","$event","loading","create","model","value","callback","$$v","expression","fields","rules","error","$set","description","listed","scopedSlots","_u","key","fn","ref","item","_b","removeLocation","getLocationPosition","InputField","active","window","dispatchEvent","Event","$store","dispatch","locationIds","secretId","body","InputFieldUtil","getValues","TourService","then","response","message","$router","catch","ErrorHandler","finally","indexOf","TourMap","Editor","props","delimiters","type","returnObject","data","editingIndex","computed","computedCounterValue","multiple","selectedItems","internalSearch","hasSlot","VSelect","isAnyValueAllowed","menuCanShow","hasDisplayedItems","$slots","searchIsDirty","methods","onInternalSearchChanged","val","delimiter","find","d","genInput","input","genChipSelection","chip","dblclick","onChipInput","onEnterDown","e","getMenuIndex","onFilteredItemsChanged","onKeyDown","keyCode","$refs","selectionStart","onTabDown","selectItem","getText","toLocaleLowerCase","setSelectedItems","internalValue","setValue","updateEditing","updateCombobox","isUsingSlot","Boolean","$scopedSlots","updateSelf","updateTags","menuIndex","index","onPaste","pastedItemText","event","findExistingIndex","VCardText","VCard","VCardTitle","VChip","VCombobox","VDivider","VForm","VSpacer","VStepper","VStepperContent","VStepperHeader","VStepperItems","VStepperStep","VSwitch","VTextField","VToolbar","VToolbarItems","VToolbarTitle","visitSecret","setBaseUrl","BACKEND","URL","addInterceptor","build"],"mappings":"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","file":"js/chunk-0c40a2c2.e4db4a8c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('b',{staticClass:\"pb-5 pt-2 wrap--all\"},[_vm._v(_vm._s(_vm.payload.location.name))]),_c('v-btn',{attrs:{\"to\":(\"/locations/\" + (_vm.payload.location.secretId)),\"color\":\"primary\",\"depressed\":\"\",\"small\":\"\"}},[_vm._v(\" View \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\" mdi-arrow-right \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { LocationPopupPayload } from \"@/types/map/location/LocationPopup\";\n\n@Component\nexport default class LocationPopup extends Vue {\n    /**\n     * Payload passed by the MarkerMap.\n     */\n    @Prop()\n    payload: LocationPopupPayload;\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationPopup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationPopup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LocationPopup.vue?vue&type=template&id=6fe6b1ab&\"\nimport script from \"./LocationPopup.vue?vue&type=script&lang=ts&\"\nexport * from \"./LocationPopup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VIcon,VRow})\n","module.exports = __webpack_public_path__ + \"img/marker-icon-2x-red.07aea9c9.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"height\":\"100%\",\"width\":\"100%\"}},[(_vm.showLocations && _vm.locations.isLoading())?[_c('v-skeleton-loader',{attrs:{\"dense\":\"\",\"type\":\"image\"}})]:(!_vm.showLocations || _vm.locations.isSuccess())?[_c('marker-map',{staticClass:\"ma-auto\",attrs:{\"height\":_vm.height,\"width\":_vm.width,\"zoom\":_vm.zoom,\"center\":_vm.center,\"center-by-ip\":_vm.centerByIp,\"center-by-geo\":_vm.centerByGeo,\"markers\":_vm.markers,\"lines\":_vm.lines,\"popupComponent\":_vm.popupComponent,\"searchEnabled\":_vm.searchEnabled},on:{\"searchClick\":_vm.onSearchClick}})]:(_vm.showLocations && _vm.locations.isError())?[_c('error-placeholder',{attrs:{\"error-id\":\"locations\"}})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Location from \"@/api/models/Location\";\n\nexport class TourCreatePopupPayload {\n    /**\n     * Location to display inside the popup.\n     */\n    public location: Location;\n\n    /**\n     * Action to execute when the user clicks on the action button in the popup.\n     */\n    public action: (location: Location) => void;\n\n    /**\n     * If the location is selected for the tour.\n     */\n    public selected: boolean;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"justify\":\"center\"}},[_c('b',{staticClass:\"pb-5 pt-2 wrap--all\"},[_vm._v(_vm._s(_vm.payload.location.name))]),(!_vm.payload.selected)?_c('v-btn',{attrs:{\"color\":\"primary\",\"depressed\":\"\",\"small\":\"\"},on:{\"click\":_vm.onButtonClick}},[_vm._v(\" Add to tour \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\" mdi-plus-circle-outline \")])],1):_c('v-btn',{attrs:{\"color\":\"error\",\"depressed\":\"\",\"small\":\"\"},on:{\"click\":_vm.onButtonClick}},[_vm._v(\" Remove \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\" mdi-delete \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { TourCreatePopupPayload } from \"@/types/map/tour/TourCreatePopup\";\n\n@Component\nexport default class TourCreatePopup extends Vue {\n    /**\n     * Payload passed by the MarkerMap.\n     */\n    @Prop()\n    payload: TourCreatePopupPayload;\n\n    /**\n     * Map object.\n     */\n    @Prop()\n    map: any;\n\n    /**\n     * When the user clicks on the button.\n     */\n    onButtonClick() {\n        // Close the popup.\n        if (this.map) {\n            this.map.closePopup();\n        }\n\n        // Execute the payload action.\n        this.payload.action(this.payload.location);\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TourCreatePopup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TourCreatePopup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TourCreatePopup.vue?vue&type=template&id=7c7b531a&\"\nimport script from \"./TourCreatePopup.vue?vue&type=script&lang=ts&\"\nexport * from \"./TourCreatePopup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VIcon,VRow})\n","import { LatLng, LatLngTuple } from \"leaflet\";\n\nexport class MapLine {\n    /**\n     * List of latitude/longitude objects for the line\n     */\n    public latLngs: Array<LatLng>;\n\n    /**\n     * Color of the line\n     */\n    public color: string;\n\n    /**\n     * Create a new MapLine\n     * @param latLngs Array of latLng objects.\n     */\n    constructor(latLngs: Array<LatLng>) {\n        this.latLngs = latLngs;\n    }\n\n    /**\n     * Convert the latLng objects to latLng tuples.\n     */\n    getLatLngTuples(): Array<LatLngTuple> {\n        return this.latLngs.map((latLng) => [latLng.lat, latLng.lng]);\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, PropSync, Vue } from \"vue-property-decorator\";\nimport { EchoPromise } from \"echofetch\";\nimport { RequestHandler } from \"@/api/RequestHandler\";\nimport { MapMarker } from \"@/types/map/MapMarker\";\nimport { Icon, LatLng, Map } from \"leaflet\";\nimport Location from \"@/api/models/Location\";\nimport LocationService from \"@/api/services/LocationService\";\nimport ErrorPlaceholder from \"@/components/error/ErrorPlaceholder.vue\";\nimport MarkerMap from \"@/components/map/MarkerMap.vue\";\nimport { TourCreatePopupPayload } from \"@/types/map/tour/TourCreatePopup\";\nimport { ArrayUtil } from \"@/util/ArrayUtil\";\nimport TourCreatePopup from \"@/components/map/popup/TourCreatePopup.vue\";\nimport { MapLine } from \"@/types/map/MapLine\";\nimport LocationPopup from \"@/components/map/popup/LocationPopup.vue\";\n\n@Component({\n    components: { MarkerMap, ErrorPlaceholder },\n})\nexport default class TourMap extends Vue {\n    /**\n     * List of locations for the specific tour.\n     * The order of the locations in the array is the order of the tour.\n     */\n    @PropSync(\"tourLocations\")\n    _tourLocations: Array<Location>;\n\n    /**\n     * Height of the map.\n     */\n    @Prop()\n    height: number;\n\n    /**\n     * Width of the map.\n     */\n    @Prop()\n    width: number;\n\n    /**\n     * Center of the map.\n     */\n    @Prop()\n    center: Array<number>;\n\n    /**\n     * Should the users IP-address be used as center for the map.\n     * @var center will be used as initial center & fallback.\n     */\n    @Prop({ default: false })\n    centerByIp: boolean;\n\n    /**\n     * Should the users geolocation be used as center for the map.\n     * This will add a button allowing the user to center the map using its location.\n     * @var center will be used as initial center & fallback.\n     */\n    @Prop({ default: false })\n    centerByGeo: boolean;\n\n    /**\n     * Zoom level of the map.\n     */\n    @Prop()\n    zoom: number;\n\n    /**\n     * Should the search bar be visible & enabled\n     */\n    @Prop({ default: false })\n    searchEnabled: boolean;\n\n    /**\n     * Should all the locations, beside the tour locations, be shown.\n     */\n    @Prop({ default: false })\n    showLocations: boolean;\n\n    /**\n     * Should the select menu on locations be shown.\n     * True is used when creating a tour.\n     * When false it will show the location information instead.\n     */\n    @Prop({ default: false })\n    showSelect: boolean;\n\n    /**\n     * Component to display inside the popup of a marker.\n     */\n    get popupComponent(): unknown {\n        return this.showSelect ? TourCreatePopup : LocationPopup;\n    }\n\n    /**\n     * List with all the available locations.\n     */\n    locations?: EchoPromise<Array<Location>> | null = this.showLocations\n        ? RequestHandler.handle(LocationService.getAll(), {\n              id: \"locations\",\n              style: \"SECTION\",\n          })\n        : null;\n\n    /**\n     * When the user clicks on a search result.\n     * Go to the coordinates on the map.\n     * @param result Search result of a search provider.\n     * @param map Map object.\n     */\n    onSearchClick(result: any, map: Map) {\n        // Go to the marker location.\n        map.flyTo([result.y, result.x], 15);\n    }\n\n    /**\n     * Get a list with markers, based on the list with tour locations & all other locations.\n     */\n    get markers(): Array<MapMarker> {\n        const _markers = new Array<MapMarker>();\n\n        // Add the tour locations.\n        for (const tourLocation of this._tourLocations) {\n            const latLng = new LatLng(\n                tourLocation.latitude,\n                tourLocation.longitude\n            );\n\n            const marker = new MapMarker(latLng);\n\n            // Create the popup payload.\n            const popupPayload = new TourCreatePopupPayload();\n            popupPayload.location = tourLocation;\n            popupPayload.selected = true;\n            popupPayload.action = (location) =>\n                ArrayUtil.delete(this._tourLocations, location);\n            marker.setPopupPayload(popupPayload);\n\n            // Set a red icon for the tour markers.\n            // Only do this when \"showSelect\" is true\n            if (this.showSelect) {\n                marker.setIcon(\n                    new Icon({\n                        iconUrl: require(\"@/assets/img/marker-icon-2x-red.png\"),\n                        shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\n                        iconSize: [25, 41],\n                        iconAnchor: [12, 41],\n                        popupAnchor: [1, -34],\n                        shadowSize: [41, 41],\n                    })\n                );\n            }\n\n            _markers.push(marker);\n        }\n\n        // Add the locations (when present)\n        if (this.locations && this.locations.isSuccess()) {\n            for (const location of this.locations.requireData()) {\n                // Skip the location when already present inside the tour locations.\n                if (this._tourLocations.includes(location)) {\n                    continue;\n                }\n\n                const latLng = new LatLng(\n                    location.latitude,\n                    location.longitude\n                );\n\n                const marker = new MapMarker(latLng);\n\n                // Create the popup payload.\n                const popupPayload = new TourCreatePopupPayload();\n                popupPayload.location = location;\n                popupPayload.selected = false;\n                popupPayload.action = (location) =>\n                    this._tourLocations.push(location);\n                marker.setPopupPayload(popupPayload);\n\n                _markers.push(marker);\n            }\n        }\n\n        return _markers;\n    }\n\n    /**\n     * Get a list with lines, based on the list with tour locations.\n     */\n    get lines(): Array<MapLine> {\n        const _lines = new Array<MapLine>();\n\n        for (let i = 0; i < this._tourLocations.length - 1; i++) {\n            const locationStart = this._tourLocations[i];\n            const locationEnd = this._tourLocations[i + 1];\n\n            const startCoord = new LatLng(\n                locationStart.latitude,\n                locationStart.longitude\n            );\n            const endCoord = new LatLng(\n                locationEnd.latitude,\n                locationEnd.longitude\n            );\n\n            const line = new MapLine([startCoord, endCoord]);\n            line.color = this.showSelect ? \"#c0392b\" : \"#2980b9\";\n\n            _lines.push(line);\n        }\n\n        return _lines;\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TourMap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TourMap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TourMap.vue?vue&type=template&id=6dd7e212&\"\nimport script from \"./TourMap.vue?vue&type=script&lang=ts&\"\nexport * from \"./TourMap.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\ninstallComponents(component, {VSkeletonLoader})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":_vm.close}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-toolbar-title',[_vm._v(\"Create new tour\")]),_c('v-spacer'),_c('v-toolbar-items',[(_vm.stepper === 1)?_c('v-btn',{attrs:{\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.stepper = 2}}},[_vm._v(\" Continue \")]):(_vm.stepper === 2)?_c('v-btn',{attrs:{\"dark\":\"\",\"text\":\"\",\"disabled\":_vm.loading,\"loading\":_vm.loading},on:{\"click\":_vm.create}},[_vm._v(\" Save \")]):_vm._e()],1)],1),_c('v-card-title',[_vm._v(\" Create a new tour \")]),_c('v-card-text',[_vm._v(\" Follow the steps below to create a new tour. \")]),_c('v-stepper',{staticClass:\"elevation-0\",model:{value:(_vm.stepper),callback:function ($$v) {_vm.stepper=$$v},expression:\"stepper\"}},[_c('v-stepper-header',{staticClass:\"elevation-0\"},[_c('v-stepper-step',{attrs:{\"editable\":\"\",\"complete\":_vm.stepper > 1,\"step\":1}},[_vm._v(\" Information \")]),_c('v-divider'),_c('v-stepper-step',{attrs:{\"editable\":\"\",\"complete\":_vm.stepper > 2,\"step\":2}},[_vm._v(\" Locations \")])],1),_c('v-stepper-items',[_c('v-stepper-content',{attrs:{\"step\":\"1\"}},[_c('v-form',{staticClass:\"pt-1 pl-3\"},[_c('v-text-field',{attrs:{\"rules\":_vm.fields.name.rules,\"error-messages\":_vm.fields.name.error,\"label\":\"Name\",\"placeholder\":\"Name of the tour\",\"disabled\":_vm.loading,\"outlined\":\"\",\"required\":\"\"},model:{value:(_vm.fields.name.value),callback:function ($$v) {_vm.$set(_vm.fields.name, \"value\", $$v)},expression:\"fields.name.value\"}}),_c('editor',{attrs:{\"disabled\":_vm.loading,\"title\":\"Description\"},model:{value:(_vm.fields.description.value),callback:function ($$v) {_vm.$set(_vm.fields.description, \"value\", $$v)},expression:\"fields.description.value\"}}),_c('div',{staticClass:\"input__title\"},[_vm._v(\"Listed\")]),_c('v-switch',{attrs:{\"label\":\"Should the tour be visible on the tours overview page.\",\"disabled\":_vm.loading},model:{value:(_vm.fields.listed.value),callback:function ($$v) {_vm.$set(_vm.fields.listed, \"value\", $$v)},expression:\"fields.listed.value\"}})],1)],1),_c('v-stepper-content',{attrs:{\"step\":\"2\"}},[_c('v-form',{staticClass:\"pt-1 pl-3\"},[_c('tour-map',{attrs:{\"height\":\"400px\",\"width\":\"100%\",\"zoom\":2,\"center-by-geo\":true,\"searchEnabled\":true,\"tour-locations\":_vm.fields.locations.value,\"show-select\":true,\"show-locations\":true},on:{\"update:tourLocations\":function($event){return _vm.$set(_vm.fields.locations, \"value\", $event)},\"update:tour-locations\":function($event){return _vm.$set(_vm.fields.locations, \"value\", $event)}}}),_c('div',{staticClass:\"mt-5\"},[_c('div',{staticClass:\"text--secondary pb-4\"},[_vm._v(\" Selected locations \")]),_c('v-combobox',{attrs:{\"chips\":\"\",\"clearable\":\"\",\"hide-no-data\":\"\",\"label\":\"Selected locations\",\"append-icon\":\"\",\"multiple\":\"\",\"solo\":\"\",\"outlined\":\"\",\"flat\":\"\"},scopedSlots:_vm._u([{key:\"selection\",fn:function(ref){\n                                var attrs = ref.attrs;\n                                var item = ref.item;\nreturn [_c('v-chip',_vm._b({attrs:{\"close\":\"\"},on:{\"click:close\":function($event){return _vm.removeLocation(item)}}},'v-chip',attrs,false),[_c('strong',[_vm._v(\" \"+_vm._s(_vm.getLocationPosition(item) + 1)+\". \"+_vm._s(item.name)+\" \")])])]}}]),model:{value:(_vm.fields.locations.value),callback:function ($$v) {_vm.$set(_vm.fields.locations, \"value\", $$v)},expression:\"fields.locations.value\"}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { InputField } from \"@/types/fields/InputField\";\nimport Editor from \"@/components/Editor.vue\";\nimport TourMap from \"@/components/map/tour/TourMap.vue\";\nimport Location from \"@/api/models/Location\";\nimport { ArrayUtil } from \"@/util/ArrayUtil\";\nimport { ErrorHandler } from \"@/api/error/ErrorHandler\";\nimport TourService from \"@/api/services/TourService\";\nimport { InputFieldUtil } from \"@/util/InputFieldUtil\";\n\n@Component({ components: { TourMap, Editor } })\nexport default class TourCreateModal extends Vue {\n    /**\n     * If the modal is loading.\n     */\n    loading = false;\n\n    /**\n     * Stepper counter used for knowing in which stage of the configuration the user is.\n     */\n    stepper = 1;\n\n    /**\n     * Input fields values & properties.\n     */\n    fields = {\n        name: new InputField(),\n        description: new InputField(),\n        listed: new InputField({ value: true }),\n        active: new InputField({ value: true }),\n        locations: new InputField<Array<Location>>({ value: [] }),\n    };\n\n    /**\n     * Due to a bug in Leaflet, when a map is created and not visible (such in modal or steppers),\n     * it will not render properly.\n     *\n     * By sending a fake resize event, we force Leaflet to refresh the map and display it properly.\n     */\n    @Watch(\"stepper\")\n    updateMap() {\n        if (this.stepper == 2) {\n            window.dispatchEvent(new Event(\"resize\"));\n        }\n    }\n\n    /**\n     * Close the modal.\n     */\n    close() {\n        this.$store.dispatch(\"modal/close\");\n    }\n\n    /**\n     * Create the tour\n     */\n    create() {\n        const locationIds = this.fields.locations.value.map(\n            (location: Location) => location.secretId\n        );\n        const body = {\n            ...InputFieldUtil.getValues(this.fields),\n            locations: locationIds,\n        };\n\n        this.loading = true;\n\n        TourService.create(body)\n            .then((response) => {\n                this.$store.dispatch(\"snackbar/open\", {\n                    message: \"Tour was successfully created\",\n                    color: \"success\",\n                });\n\n                // Close the modal.\n                this.$store.dispatch(\"modal/close\");\n\n                // Go to the route of the created tour.\n                this.$router.push(`/tours/${response.secretId}`);\n            })\n            .catch((error) => {\n                // Handle field errors.\n                ErrorHandler.handle(\n                    error,\n                    {\n                        style: \"SNACKBAR\",\n                        id: \"tourCreate\",\n                    },\n                    this.fields\n                );\n\n                // Check if there is an error in the first step.\n                // If this is the case, go to this step.\n                if (this.fields.name.error || this.fields.description.error) {\n                    this.stepper = 1;\n                }\n            })\n            .finally(() => (this.loading = false));\n    }\n\n    /**\n     * Get the position of the given location in the selected locations list.\n     * @param location\n     */\n    getLocationPosition(location: Location): number {\n        return (this.fields.locations.value as Array<Location>).indexOf(\n            location\n        );\n    }\n\n    /**\n     * Remove a location from the selected locations list.\n     * @param location\n     */\n    removeLocation(location: Location) {\n        ArrayUtil.delete(\n            this.fields.locations.value as Array<Location>,\n            location\n        );\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TourCreateModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TourCreateModal.vue?vue&type=script&lang=ts&\"","// Styles\nimport '../VAutocomplete/VAutocomplete.sass'\n\n// Extensions\nimport VSelect from '../VSelect/VSelect'\nimport VAutocomplete from '../VAutocomplete/VAutocomplete'\n\n// Utils\nimport { keyCodes } from '../../util/helpers'\n\n// Types\nimport { PropValidator } from 'vue/types/options'\n\n/* @vue/component */\nexport default VAutocomplete.extend({\n  name: 'v-combobox',\n\n  props: {\n    delimiters: {\n      type: Array,\n      default: () => ([]),\n    } as PropValidator<string[]>,\n    returnObject: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  data: () => ({\n    editingIndex: -1,\n  }),\n\n  computed: {\n    computedCounterValue (): number {\n      return this.multiple\n        ? this.selectedItems.length\n        : (this.internalSearch || '').toString().length\n    },\n    hasSlot (): boolean {\n      return VSelect.options.computed.hasSlot.call(this) || this.multiple\n    },\n    isAnyValueAllowed (): boolean {\n      return true\n    },\n    menuCanShow (): boolean {\n      if (!this.isFocused) return false\n\n      return this.hasDisplayedItems ||\n        (!!this.$slots['no-data'] && !this.hideNoData)\n    },\n    searchIsDirty (): boolean {\n      return this.internalSearch != null\n    },\n  },\n\n  methods: {\n    onInternalSearchChanged (val: any) {\n      if (\n        val &&\n        this.multiple &&\n        this.delimiters.length\n      ) {\n        const delimiter = this.delimiters.find(d => val.endsWith(d))\n        if (delimiter != null) {\n          this.internalSearch = val.slice(0, val.length - delimiter.length)\n          this.updateTags()\n        }\n      }\n\n      this.updateMenuDimensions()\n    },\n    genInput () {\n      const input = VAutocomplete.options.methods.genInput.call(this)\n\n      delete input.data!.attrs!.name\n      input.data!.on!.paste = this.onPaste\n\n      return input\n    },\n    genChipSelection (item: object, index: number) {\n      const chip = VSelect.options.methods.genChipSelection.call(this, item, index)\n\n      // Allow user to update an existing value\n      if (this.multiple) {\n        chip.componentOptions!.listeners! = {\n          ...chip.componentOptions!.listeners!,\n          dblclick: () => {\n            this.editingIndex = index\n            this.internalSearch = this.getText(item)\n            this.selectedIndex = -1\n          },\n        }\n      }\n\n      return chip\n    },\n    onChipInput (item: object) {\n      VSelect.options.methods.onChipInput.call(this, item)\n\n      this.editingIndex = -1\n    },\n    // Requires a manual definition\n    // to overwrite removal in v-autocomplete\n    onEnterDown (e: Event) {\n      e.preventDefault()\n      // If has menu index, let v-select-list handle\n      if (this.getMenuIndex() > -1) return\n\n      this.$nextTick(this.updateSelf)\n    },\n    onFilteredItemsChanged (val: never[], oldVal: never[]) {\n      if (!this.autoSelectFirst) return\n\n      VAutocomplete.options.methods.onFilteredItemsChanged.call(this, val, oldVal)\n    },\n    onKeyDown (e: KeyboardEvent) {\n      const keyCode = e.keyCode\n\n      if (\n        e.ctrlKey ||\n        ![keyCodes.home, keyCodes.end].includes(keyCode)\n      ) {\n        VSelect.options.methods.onKeyDown.call(this, e)\n      }\n\n      // If user is at selection index of 0\n      // create a new tag\n      if (this.multiple &&\n        keyCode === keyCodes.left &&\n        this.$refs.input.selectionStart === 0\n      ) {\n        this.updateSelf()\n      } else if (keyCode === keyCodes.enter) {\n        this.onEnterDown(e)\n      }\n\n      // The ordering is important here\n      // allows new value to be updated\n      // and then moves the index to the\n      // proper location\n      this.changeSelectedIndex(keyCode)\n    },\n    onTabDown (e: KeyboardEvent) {\n      // When adding tags, if searching and\n      // there is not a filtered options,\n      // add the value to the tags list\n      if (this.multiple &&\n        this.internalSearch &&\n        this.getMenuIndex() === -1\n      ) {\n        e.preventDefault()\n        e.stopPropagation()\n\n        return this.updateTags()\n      }\n\n      VAutocomplete.options.methods.onTabDown.call(this, e)\n    },\n    selectItem (item: object) {\n      // Currently only supports items:<string[]>\n      if (this.editingIndex > -1) {\n        this.updateEditing()\n      } else {\n        VAutocomplete.options.methods.selectItem.call(this, item)\n\n        // if selected item contains search value,\n        // remove the search string\n        if (\n          this.internalSearch &&\n          this.multiple &&\n          this.getText(item).toLocaleLowerCase().includes(this.internalSearch.toLocaleLowerCase())\n        ) {\n          this.internalSearch = null\n        }\n      }\n    },\n    setSelectedItems () {\n      if (this.internalValue == null ||\n        this.internalValue === ''\n      ) {\n        this.selectedItems = []\n      } else {\n        this.selectedItems = this.multiple ? this.internalValue : [this.internalValue]\n      }\n    },\n    setValue (value?: any) {\n      VSelect.options.methods.setValue.call(this, value ?? this.internalSearch)\n    },\n    updateEditing () {\n      const value = this.internalValue.slice()\n      value[this.editingIndex] = this.internalSearch\n\n      this.setValue(value)\n\n      this.editingIndex = -1\n    },\n    updateCombobox () {\n      // If search is not dirty, do nothing\n      if (!this.searchIsDirty) return\n\n      // The internal search is not matching\n      // the internal value, update the input\n      if (this.internalSearch !== this.getText(this.internalValue)) this.setValue()\n\n      // Reset search if using slot to avoid a double input\n      const isUsingSlot = Boolean(this.$scopedSlots.selection) || this.hasChips\n      if (isUsingSlot) this.internalSearch = null\n    },\n    updateSelf () {\n      this.multiple ? this.updateTags() : this.updateCombobox()\n    },\n    updateTags () {\n      const menuIndex = this.getMenuIndex()\n\n      // If the user is not searching\n      // and no menu item is selected\n      // do nothing\n      if (menuIndex < 0 &&\n        !this.searchIsDirty\n      ) return\n\n      if (this.editingIndex > -1) {\n        return this.updateEditing()\n      }\n\n      const index = this.selectedItems.indexOf(this.internalSearch)\n      // If it already exists, do nothing\n      // this might need to change to bring\n      // the duplicated item to the last entered\n      if (index > -1) {\n        const internalValue = this.internalValue.slice()\n        internalValue.splice(index, 1)\n\n        this.setValue(internalValue)\n      }\n\n      // If menu index is greater than 1\n      // the selection is handled elsewhere\n      // TODO: find out where\n      if (menuIndex > -1) return (this.internalSearch = null)\n\n      this.selectItem(this.internalSearch)\n      this.internalSearch = null\n    },\n    onPaste (event: ClipboardEvent) {\n      if (!this.multiple || this.searchIsDirty) return\n\n      const pastedItemText = event.clipboardData?.getData('text/vnd.vuetify.autocomplete.item+plain')\n      if (pastedItemText && this.findExistingIndex(pastedItemText as any) === -1) {\n        event.preventDefault()\n        VSelect.options.methods.selectItem.call(this, pastedItemText as any)\n      }\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./TourCreateModal.vue?vue&type=template&id=6f66ebec&\"\nimport script from \"./TourCreateModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./TourCreateModal.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCombobox } from 'vuetify/lib/components/VCombobox';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VStepper } from 'vuetify/lib/components/VStepper';\nimport { VStepperContent } from 'vuetify/lib/components/VStepper';\nimport { VStepperHeader } from 'vuetify/lib/components/VStepper';\nimport { VStepperItems } from 'vuetify/lib/components/VStepper';\nimport { VStepperStep } from 'vuetify/lib/components/VStepper';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCardText,VCardTitle,VChip,VCombobox,VDivider,VForm,VIcon,VSpacer,VStepper,VStepperContent,VStepperHeader,VStepperItems,VStepperStep,VSwitch,VTextField,VToolbar,VToolbarItems,VToolbarTitle})\n","import config from \"@/config\";\nimport Location from \"../models/Location\";\nimport {\n    Body,\n    DELETE,\n    EchoPromise,\n    EchoService,\n    EchoServiceBuilder,\n    GET,\n    PATCH,\n    Path,\n    POST,\n} from \"echofetch\";\nimport {\n    LocationCreateWrapper,\n    LocationIdWrapper,\n    LocationUpdateWrapper,\n} from \"@/api/wrappers/LocationWrapper\";\nimport { AuthInterceptor } from \"@/api/interceptors/AuthInterceptor\";\nimport LocationStatistics from \"@/api/models/LocationStatistics\";\n\nclass LocationService extends EchoService {\n    /**\n     * Get a location by its secret id\n     * @param secretId Secret id of the location.\n     */\n    @GET(\"/locations/{secretId}\")\n    get(@Path(\"secretId\") secretId: string): EchoPromise<Location> {\n        return {} as EchoPromise<Location>;\n    }\n\n    /**\n     * Get a list with location.\n     */\n    @GET(\"/locations\")\n    getAll(): EchoPromise<Array<Location>> {\n        return {} as EchoPromise<Array<Location>>;\n    }\n\n    /**\n     * Get the statistics for a specific location.\n     * @param secretId Secret id of the location.\n     */\n    @GET(\"/locations/{secretId}/statistics\")\n    getStatistics(\n        @Path(\"secretId\") secretId: string\n    ): EchoPromise<LocationStatistics> {\n        return {} as EchoPromise<LocationStatistics>;\n    }\n\n    /**\n     * Get a list of visits for a specific location.\n     * @param secretId Secret id of the location.\n     */\n    @GET(\"/locations/{secretId}/visits\")\n    getVisits(@Path(\"secretId\") secretId: string): EchoPromise<Location> {\n        return {} as EchoPromise<Location>;\n    }\n\n    /**\n     * Get a location by a given secret visit code.\n     * @param visitSecret Secret visit code.\n     */\n    @GET(\"/locations/visits/{visitSecret}\")\n    getLocationByVisitSecret(\n        @Path(\"visitSecret\") visitSecret: string\n    ): EchoPromise<Location> {\n        return {} as EchoPromise<Location>;\n    }\n\n    /**\n     * Visit a location by a given secret visit code.\n     * @param visitSecret Secret visit code.\n     */\n    @POST(\"/locations/visits/{visitSecret}\")\n    visitLocation(\n        @Path(\"visitSecret\") visitSecret: string\n    ): EchoPromise<LocationIdWrapper> {\n        return {} as EchoPromise<LocationIdWrapper>;\n    }\n\n    /**\n     * Create a new location.\n     * @param locationCreate Location parameters for the new location.\n     */\n    @POST(\"/locations\")\n    create(\n        @Body() body: LocationCreateWrapper\n    ): EchoPromise<LocationIdWrapper> {\n        return {} as EchoPromise<LocationIdWrapper>;\n    }\n\n    /**\n     * Delete a location\n     * @param secretId Id of the location\n     */\n    @DELETE(\"/locations/{secretId}\")\n    delete(@Path(\"secretId\") secretId: string): EchoPromise<string> {\n        return {} as EchoPromise<string>;\n    }\n\n    /**\n     * Update a location\n     * @param secretId Id of the location\n     */\n    @PATCH(\"/locations/{secretId}\")\n    update(\n        @Path(\"secretId\") secretId: string,\n        @Body() body: LocationUpdateWrapper\n    ): EchoPromise<void> {\n        return {} as EchoPromise<void>;\n    }\n}\n\nexport default new EchoServiceBuilder()\n    .setBaseUrl(config.BACKEND.URL)\n    .addInterceptor(new AuthInterceptor())\n    .build(LocationService);\n"],"sourceRoot":""}